<main style="margin-top: 70px;">
	<%- include('../partials/agentSidebar') %>

		<div id="main-wrapper">
			<div class="d-flex align-items-center mb-4">
				<button class="btn btn-light d-lg-none me-3" id="sidebar-toggler-btn"><i
						class="fas fa-bars"></i></button>
				<h2 class="fw-bold text-dark mb-0">Pending Collections</h2>
			</div>

			<div class="card border-0 shadow-sm">
				<div class="card-body p-0">
					<div class="table-responsive">
						<table class="table table-hover align-middle mb-0">
							<thead class="bg-light">
								<tr>
									<th scope="col" class="ps-4">#</th>
									<th scope="col">Donor Name</th>
									<th scope="col">Address</th>
									<th scope="col">Phone</th>
									<th scope="col" class="text-end pe-4">Actions</th>
								</tr>
							</thead>
							<tbody>
								<% if(pendingCollections.length===0) { %>
									<tr>
										<td colspan="5" class="text-center py-5">
											<img src="/assets/images/empty-box.svg" alt="No pending collections"
												style="width: 100px; opacity: 0.5;" onerror="this.style.display='none'">
											<p class="text-muted mt-3">No pending collections assigned to you.</p>
										</td>
									</tr>
									<% } %>
										<% for(let i=0; i<pendingCollections.length; i++) { %>
											<tr>
												<td class="ps-4 fw-bold text-muted">
													<%= i+1 %>
												</td>
												<td>
													<div class="d-flex align-items-center">
														<div class="user-icon-sm bg-primary text-white rounded-circle me-2 d-flex align-items-center justify-content-center"
															style="width: 30px; height: 30px; font-size: 0.9rem;">
															<%= pendingCollections[i].donor.firstName[0] %>
														</div>
														<%= pendingCollections[i].donor.firstName + " " +
															pendingCollections[i].donor.lastName %>
													</div>
												</td>
												<td class="text-truncate" style="max-width: 200px;"
													title="<%= pendingCollections[i].address %>">
													<%= pendingCollections[i].address %>
												</td>
												<td>
													<%= pendingCollections[i].phone %>
												</td>
												<td class="text-end pe-4">
													<a href="/agent/collection/view/<%= pendingCollections[i]._id %>"
														class="btn btn-sm btn-outline-primary me-1">View</a>
													<a href="/agent/collection/collect/<%= pendingCollections[i]._id %>"
														class="btn btn-sm btn-success">Collect</a>
												</td>
											</tr>
											<% } %>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
</main>