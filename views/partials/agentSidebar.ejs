<div id="sidebar" class="bg-white shadow-sm h-100 d-flex flex-column">
	<div class="p-4 border-bottom">
		<div class="d-flex align-items-center">
			<div class="user-icon me-3 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center"
				style="width: 45px; height: 45px; font-size: 1.2rem;">
				<%= currentUser.firstName[0].toUpperCase() %>
			</div>
			<div>
				<h6 class="mb-0 fw-bold">
					<%= currentUser.firstName %>
						<%= currentUser.lastName %>
				</h6>
				<small class="text-muted">Agent</small>
			</div>
		</div>
	</div>
	<ul class="nav flex-column p-3 flex-grow-1">
		<li class="nav-item mb-2">
			<a href="/agent/dashboard"
				class="nav-link text-dark rounded p-3 <%= (typeof title != 'undefined' && title == 'Dashboard') ? 'active bg-secondary text-white' : '' %>">
				<i class="fas fa-th-large me-3"></i>Dashboard
			</a>
		</li>
		<li class="nav-item mb-2">
			<a href="/agent/collections/pending"
				class="nav-link text-dark rounded p-3 <%= (typeof title != 'undefined' && title == 'Pending Collections') ? 'active bg-secondary text-white' : '' %>">
				<i class="fas fa-truck-loading me-3"></i>Pending Collections
			</a>
		</li>
		<li class="nav-item mb-2">
			<a href="/agent/collections/previous"
				class="nav-link text-dark rounded p-3 <%= (typeof title != 'undefined' && title == 'Previous Collections') ? 'active bg-secondary text-white' : '' %>">
				<i class="fas fa-history me-3"></i>History
			</a>
		</li>
		<li class="nav-item mb-2">
			<a href="/agent/profile"
				class="nav-link text-dark rounded p-3 <%= (typeof title != 'undefined' && title == 'Profile') ? 'active bg-secondary text-white' : '' %>">
				<i class="fas fa-user me-3"></i>Profile
			</a>
		</li>
	</ul>
	<div class="p-3 border-top">
		<a href="/auth/logout" class="btn btn-outline-danger w-100">
			<i class="fas fa-sign-out-alt me-2"></i>Logout
		</a>
	</div>
</div>

<style>
	#sidebar {
		width: 280px;
		position: fixed;
		top: 70px;
		bottom: 0;
		left: 0;
		z-index: 100;
		transition: all 0.3s;
		overflow-y: auto;
	}

	#main-wrapper {
		margin-left: 280px;
		padding: 2rem;
		transition: all 0.3s;
	}

	@media (max-width: 992px) {
		#sidebar {
			margin-left: -280px;
		}

		#sidebar.active {
			margin-left: 0;
		}

		#main-wrapper {
			margin-left: 0;
		}
	}

	.nav-link:hover {
		background-color: rgba(78, 205, 196, 0.1);
		color: var(--secondary-color) !important;
	}

	.nav-link.active:hover {
		background-color: var(--secondary-color);
		color: white !important;
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const toggler = document.getElementById('sidebar-toggler-btn');
		if (toggler) {
			toggler.addEventListener('click', () => {
				document.getElementById('sidebar').classList.toggle('active');
			});
		}
	});
</script>